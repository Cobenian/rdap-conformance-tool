{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "id" : "rdap_common.json",  
  "definitions": {
    "rdapExtensions": {
      "allOf": [
        {
          "type": "string",
          "errorCode": -10501
        },
        {
          "enum": [
            "rdap_level_0",
            "arin_originas0",
            "artRecord",
            "cidr0",
            "fred",
            "icann_rdap_response_profile_0",
            "icann_rdap_technical_implementation_guide_0",
            "nro_rdap_profile_0",
            "nro_rdap_profile_asn_flat_0",
            "nro_rdap_profile_asn_hierarchical_0",
            "paging",
            "platformNS",
            "rdap_objectTag",
            "redirect_with_content",
            "regType",
            "sorting",
            "subsetting"
          ],
          "errorCode": -10502
        }
      ]
    },
    "positiveInteger": {
      "type": "integer",
      "minimum": 0
    },
    "uniqueStringArray": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "uniqueItems": true
    },
    "rdapConformance": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "uniqueItems": true,
      "validationName": "stdRdapConformanceValidation",
      "structureInvalid": -10500
    },
    "entities": {
      "type": "array",
      "items": {
        "$ref": "rdap_entity_object.json#"
      },
      "validationName": "stdRdapEntitiesValidation"
    },
    "stringArray": {
      "type": "array",
      "items": {
        "type": "string"
      }
    },
    "datetime": {
      "allOf": [
        {
          "type": "string",
          "errorCode": -10907
        },
        {
          "type": "string",
          "format": "date-time",
          "errorCode": -10908
        }
      ]
    },
    "uri": {
      "type": "string",
      "format": "uri",
      "validationName": "webUriValidation"
    },
    "ipv4": {
      "type": "string",
      "format": "ipv4",
      "validationName": "IPv4Validation"
    },
    "ipv6": {
      "type": "string",
      "format": "ipv6",
      "validationName": "IPv6Validation"
    },
    "ip": {
      "oneOf": [
        {
          "$ref": "#/definitions/ipv4"
        },
        {
          "$ref": "#/definitions/ipv6"
        }
      ]
    },
      "rirBasicType": {
	      "type": "string",
	      "enum": [
	        "DIRECT ALLOCATION",
	        "DIRECT ASSIGNMENT",
	        "REALLOCATION",
	        "REASSIGNMENT",
	        "ALLOCATED UNSPECIFIED",
	        "ALLOCATED-BY-RIR",
	        "ALLOCATED-BY-LIR"
	       ]
	    },   
    "rirType": {
        "anyOf":[
          {
          "$ref": "#/definitions/rirBasicType"
 	      },
	      {
	      	"type" : "string",
	      	"description": "non standard rir type"
	      }
	     ]
     },        
    "ldhName": {
      "type": "string",
      "format": "hostname",
      "validationName": "stdRdapLdhNameValidation"
    },
    "unicodeName": {
      "type": "string",
      "format" : "idn-hostname",
      "validationName": "stdRdapUnicodeNameValidation"
    },
    "domainName": {
      "oneOf": [
        {
          "$ref": "#/definitions/ldhName"
        },
        {
          "$ref": "#/definitions/unicodeName"
        }
      ]
    },
    "noticeType": {
      "allOf": [
        {
          "type": "string",
          "errorCode": -10705
        },
        {
          "enum": [
            "result set truncated due to authorization",
            "result set truncated due to excessive load",
            "result set truncated due to unexplainable reasons",
            "object truncated due to authorization",
            "object truncated due to excessive load",
            "object truncated due to unexplainable reasons"
          ],
          "errorCode": -10706
        }
      ]
    },
    "lang": {
      "type": "string",
      "pattern": "[a-z]{2}(-[A-Z][a-zA-Z]*(\\-[A-Z]{2})?)?",
      "errorCode": -10800
    },
    "country": {
      "type": "string",
      "patter": "^[A-Z]{2}$"
    },
    "link": {
      "type": "object",
      "properties": {
        "value": {
          "$ref": "#/definitions/uri",
          "webUriValidation": -10609
        },
        "rel": {
          "enum": [
            "about",
            "alternate",
            "appendix",
            "archives",
            "author",
            "blocked-by",
            "bookmark",
            "canonical",
            "chapter",
            "cite-as",
            "collection",
            "contents",
            "convertedFrom",
            "copyright",
            "create-form",
            "current",
            "describedby",
            "describe",
            "disclosure",
            "dns-prefetch",
            "duplicate",
            "edit",
            "edit-form",
            "edit-media",
            "enclosure",
            "first",
            "glossary",
            "help",
            "hosts",
            "hub",
            "icon",
            "index",
            "item",
            "last",
            "latest-version",
            "license",
            "lrdd",
            "memento",
            "monitor",
            "monitor-group",
            "next",
            "next-archive",
            "nofollow",
            "noreferrer",
            "original",
            "payment",
            "pingback",
            "preconnect",
            "predecessor-version",
            "prefecth",
            "preload",
            "prerender",
            "prev",
            "preview",
            "previous",
            "prev-archive",
            "profile",
            "related",
            "replies",
            "restconf",
            "search",
            "section",
            "self",
            "service",
            "start",
            "stylesheet",
            "subsection",
            "successor-version",
            "tag",
            "terms-of-service",
            "timegate",
            "timemap",
            "type",
            "up",
            "version-history",
            "via",
            "webmention",
            "working-copy",
            "working-copy-of"
          ],
          "errorCode": -10604
        },
        "href": {
          "$ref": "#/definitions/uri",
          "webUriValidation": -10611
        },
        "hreflang": {
          "oneOf": [
            {
              "type": "array",
              "uniqueItems": true,
              "items": {
                "allOf": [
                  {
                    "type": "string",
                    "errorCode": -10607
                  },
                  {
                    "type": "string",
                    "pattern": "[a-z]{2}(-[A-Z][a-zA-Z]*(\\-[A-Z]{2})?)?",
                    "errorCode": -10608
                  }
                ]
              }
            },
            {
              "allOf": [
                {
                  "type": "string",
                  "errorCode": -10607
                },
                {
                  "type": "string",
                  "pattern": "[a-z]{2}(-[A-Z][a-zA-Z]*(\\-[A-Z]{2})?)?",
                  "errorCode": -10608
                }
              ]
            }
          ]
        },
        "title": {
          "type": "string",
          "errorCode": -10606
        },
        "media": {
          "allOf": [
            {
              "type": "string",
              "errorCode": -10603
            },
            {
              "enum": [
                "screen",
                "tty",
                "tv",
                "projection",
                "handheld",
                "print",
                "braille",
                "embossed",
                "speech",
                "all"
              ],
              "errorCode": -10603
            }
          ]
        },
        "type": {
          "type": "string",
          "pattern": "[a-zA-Z][a-zA-Z0-9]*/[a-zA-Z][a-zA-Z0-9]*"
        }
      },
      "additionalProperties": false,
      "hrefMissing": -10610,
      "required": [
        "href"
      ],
      "unknownKeys": -10601
    },
    "links": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/link"
      },
      "structureInvalid": -10600,
      "validationName": "stdRdapLinksValidation"
    },
    "eventWithoutActor": {
      "type": "object",
      "properties": {
        "eventAction": {
          "anyOf":[
            {
            "$ref": "rdap_event.json#/definitions/eventAction"
          },
          {
            "type" : "string",
            "description": "non standard event action"
          }
         ]
        },
        "eventDate": {
          "$ref": "#/definitions/datetime"
        },
        "links": {
          "$ref": "#/definitions/links"
        }
      }
    },
    "notice": {
      "type": "object",
      "properties": {
        "title": {
          "type": "string",
          "errorCode": -10703
        },
        "type": {
          "$ref": "#/definitions/noticeType"
        },
        "description": {
          "type": "array",
          "items": {
            "type": "string",
            "errorCode": -10709
          },
          "errorCode": -10708
        },
        "links": {
          "$ref": "#/definitions/links"
        }
      },
      "additionalProperties": false,
      "required": [
        "description"
      ],
      "descriptionMissing": -10707,
      "duplicateKeys": -10702
    },
    "remarks": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/notice"
      },
      "validationName": "stdRdapRemarksValidation"
    },
    "publicId": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string"
        },
        "identifier": {
          "type": "string"
        }
      },
      "required": [
        "type",
        "identifier"
      ]
    },
    "publicIds": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/publicId"
      },
      "validationName": "stdRdapPublicIdsValidation"
    }
  },
  "type": "object",
  "properties": {
    "handle": {
      "type": "string"
    },
    "status": {
      "$ref": "rdap_status.json#"
    },
    "port43": {
      "$ref": "rdap_port43.json#"
    },
    "publicIds": {
      "$ref": "#/definitions/publicIds"
    },
    "events": {
      "$ref": "rdap_events.json#"
    },
    "remarks": {
      "$ref": "#/definitions/remarks"
    },
    "links" : {
      "$ref": "#/definitions/links"
    }
  }
}